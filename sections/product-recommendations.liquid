<section class="product-recommendations" data-product-id="{{ product.id }}" data-limit="4" data-section-type="product-recommendations" data-section-id="{{ section.id }}">
  {%- if recommendations.products_count > 0 -%}
    <div class="header">
      <div>
        <h1>Recommended</h1>
      </div>
  </div>
    <div class="collection">
      {%- for product in recommendations.products -%}
        {%- assign current_variant = product.selected_or_first_available_variant -%}
        {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}

        <!-- Mobile Individual Project -->
        <a class="item mobile" href="{{ product.url }}">
          <!-- Product Featured or Variant Image -->
          <div class="image">
            {% for image in product.images %}
              {% if image.attached_to_variant? == true or featured_image == image  %}
                {% capture wrapper_class %}
                  {%- unless featured_image == image -%}
                    hide
                  {%- endunless -%}
                {% endcapture %}

                {% include 'responsive-image' with
                  image: image,
                  max_width: 700,
                  max_height: 800,
                  image_attributes: "data-product-featured-image",
                  wrapper_class: wrapper_class,
                  wrapper_attributes: "data-product-image-wrapper",
                %}
              {% endif %}
            {% endfor %}
          </div>

          <div class="information-and-variants-wrapper">
            <p class="title"><span class="arrow">↳</span>{{ product.title }}</p>
          </div>
        </a>

        <!-- Individual Product -->
        <div class="item">

          <!-- Product Featured or Variant Image -->
          <div class="image">
            {% for image in product.images %}
              {% capture wrapper_class %}
                {%- unless featured_image == image -%}
                  hide
                {%- endunless -%}
              {% endcapture %}

              {% include 'responsive-image' with
                image: image,
                max_width: 700,
                max_height: 800,
                image_attributes: "data-product-featured-image",
                wrapper_class: wrapper_class,
                wrapper_attributes: "data-product-image-wrapper",
              %}
          {% endfor %}
          </div>

          <!-- Product Information -->
          {% form 'product', product, data-product-form: '', data-product-handle: product.handle, data-enable-history-state: 'true' %}
          <div style="height: 100px; position: relative;">

            <div class="mobile">
              <p class="title"><span class="arrow">↳</span>{{ product.title }}</p>
            </div>

            <div class="information">
              <!-- Product Title -->
              <div class="arrow">
                <p class="up">↑</p>
                <p class="down">↓</p>
              </div><p class="title">{{ product.title }}</p>

              <!-- Product Price -->
              <div data-price-wrapper>
                <span data-product-price>
                  {{ current_variant.price | money }}
                </span>

                {% if product.compare_at_price_max > product.price %}
                  <span class="visually-hidden" data-compare-text>{{ 'products.product.regular_price' | t }}</span>
                  <s data-compare-price>
                    {% if current_variant.compare_at_price > current_variant.price %}
                      {{ current_variant.compare_at_price | money }}
                    {% endif %}
                  </s>
                {% endif %}
              </div>

              <!-- Product Quantity -->
              <input type="number" id="Quantity" name="quantity" value="1" min="1" style="display: none; pointer-events: none;">
            </div>

            <!-- Product Options -->
            <div class="variants">
              {% unless product.has_only_default_variant %}
                {% for option in product.options_with_values reversed %}
                  <!-- Color Options -->
                  {% if option.name == 'Color' or option.name == 'color' or option.name == 'Colors' or option.name == 'colors' %}
                    <div class="js {{ option.name | downcase }}">
                      {% for value in option.values %}
                        <input type="radio" id="Option{{ option.position }}-{{ value }}-{{ section.id}}-{{ product.id }}-{{ index0 }}" name="options[{{ option.name }}]" value="{{ value }}">
                        <label class="color-label" for="Option{{ option.position }}-{{ value }}-{{ section.id}}-{{ product.id }}-{{ index0 }}" style="background-color: {{ value }};"></label>
                      {% endfor %}
                    </div>
                  {% else %}
                  <!-- All Other Options -->
                    <div class="js {{ option.name | downcase }}">
                      {% for value in option.values %}
                        <input type="radio" id="Option{{ option.position }}-{{ value }}-{{ section.id}}-{{ product.id }}-{{ index0 }}" name="options[{{ option.name }}]" value="{{ value }}">
                        <label for="Option{{ option.position }}-{{ value }}-{{ section.id}}-{{ product.id }}-{{ index0 }}">{{ value }}</label>
                      {% endfor %}
                    </div>
                  {% endif %}
                {% endfor %}
              {% endunless %}

              <noscript>
                <select name="id">
                  {% for variant in product.variants %}
                    <option
                      {% if variant == current_variant %}selected="selected"{% endif %}
                      {% unless variant.available %}disabled="disabled"{% endunless %}
                      value="{{ variant.id }}">
                        {{ variant.title }}
                    </option>
                  {% endfor %}
                </select>
              </noscript>
            </div>
          </div>
          <!-- Buy Button -->
          <div class="actions">
              <button
                class="button"
                type="submit"
                name="add"
                data-submit-button
                {% unless current_variant.available %}disabled="disabled"{% endunless %}>
                  <p data-submit-button-text>
                    {% if current_variant.available %}
                      {{ 'products.product.add_to_cart' | t }}
                    {% else %}
                      {{ 'products.product.sold_out' | t }}
                    {% endif %}
                  </p>
              </button>

              <!-- See More Button -->

              <a href="/collections/all">
                <div class="button">
                  <p><span class="arrow">↳</span><span>Shop More</span></p>
                </div>
              </a>
            </div>
          {% endform %}
        </div>
      {%- endfor -%}
    </div>
  {%- endif -%}
</section>
